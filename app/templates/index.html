<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cross-Stitch Pattern Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='ribbon/ribbon.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='ribbon/soft_button.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/toolbar.css') }}">
</head>
<body bgcolor="#c9cdd2">
<div id="ribbon">
    <div class="logo-container">
    <img src="{{ url_for('static', filename='css/logo1.png') }}" alt="Stitch Witch Logo">
    </div>
    <span class="ribbon-window-title">🧵 Cross-Stitch Pattern Editor</span>

    <div class="ribbon-tab file" id="file-tab">
        <span class="ribbon-title">File</span>
        <div class="ribbon-backstage">
            This is the Backstage.<br/><br/>
            <div class="button big">
                <img src="{{ url_for('static', filename='ribbon/icons/normal/open-page.png') }}" alt="Open"/>
                <span class="label">Open</span>
                <span class="desc">Open a document from your computer</span>
            </div>
            <br/>
            <div class="button big">
                <img src="{{ url_for('static', filename='ribbon/icons/normal/save-page.png') }}" alt="Save"/>
                <span class="label">Save</span>
                <span class="desc">Save your document to your computer</span>
            </div>
        </div>
    </div>

    <div class="ribbon-tab" id="format-tab">
        <span class="ribbon-title">Grid</span>

        <div class="ribbon-section">
            <span class="section-title">Tables</span>
            <div class="ribbon-button ribbon-button-large" id="add-table-btn">
                <span class="button-title">Add<br/>Table</span>
                <span class="button-help">This button will add a table to your document.</span>
                <img class="ribbon-icon ribbon-normal"
                     src="{{ url_for('static', filename='ribbon/icons/normal/new-table.png') }}"/>
                <img class="ribbon-icon ribbon-hot"
                     src="{{ url_for('static', filename='ribbon/icons/hot/new-table.png') }}"/>
                <img class="ribbon-icon ribbon-disabled"
                     src="{{ url_for('static', filename='ribbon/icons/disabled/new-table.png') }}"/>
            </div>
            <div class="ribbon-button ribbon-button-large" id="open-table-btn">
                <span class="button-title">Open<br/>Table</span>
                <span class="button-help">This button will open a table and add it to your document.</span>
                <img class="ribbon-icon ribbon-normal"
                     src="{{ url_for('static', filename='ribbon/icons/normal/open-table.png') }}"/>
                <img class="ribbon-icon ribbon-hot"
                     src="{{ url_for('static', filename='ribbon/icons/hot/open-table.png') }}"/>
                <img class="ribbon-icon ribbon-disabled"
                     src="{{ url_for('static', filename='ribbon/icons/disabled/open-table.png') }}"/>
            </div>
            <div class="ribbon-button ribbon-button-large disabled" id="del-table-btn">
                <span class="button-title">Remove<br/>Table</span>
                <span class="button-help">This button will remove the selected table from your document.</span>
                <img class="ribbon-icon ribbon-normal"
                     src="{{ url_for('static', filename='ribbon/icons/normal/delete-table.png') }}"/>
                <img class="ribbon-icon ribbon-hot"
                     src="{{ url_for('static', filename='ribbon/icons/hot/delete-table.png') }}"/>
                <img class="ribbon-icon ribbon-disabled"
                     src="{{ url_for('static', filename='ribbon/icons/disabled/delete-table.png') }}"/>
            </div>
        </div>

        <div class="ribbon-section">
            <span class="section-title">Pages</span>
            <div class="ribbon-button ribbon-button-large" id="add-page-btn">
                <span class="button-title">Add<br/>Page</span>
                <span class="button-help">This button will add a page to your document.</span>
                <img class="ribbon-icon ribbon-normal"
                     src="{{ url_for('static', filename='ribbon/icons/normal/new-page.png') }}"/>
                <img class="ribbon-icon ribbon-hot"
                     src="{{ url_for('static', filename='ribbon/icons/hot/new-page.png') }}"/>
                <img class="ribbon-icon ribbon-disabled"
                     src="{{ url_for('static', filename='ribbon/icons/disabled/new-page.png') }}"/>
            </div>
            <div class="ribbon-button ribbon-button-large" id="open-page-btn">
                <span class="button-title">Open<br/>Page</span>
                <span class="button-help">This button will open a page and add it to your document.</span>
                <img class="ribbon-icon ribbon-normal"
                     src="{{ url_for('static', filename='ribbon/icons/normal/open-page.png') }}"/>
                <img class="ribbon-icon ribbon-hot"
                     src="{{ url_for('static', filename='ribbon/icons/hot/open-page.png') }}"/>
                <img class="ribbon-icon ribbon-disabled"
                     src="{{ url_for('static', filename='ribbon/icons/disabled/open-page.png') }}"/>
            </div>
            <div class="ribbon-button ribbon-button-large disabled" id="del-page-btn">
                <span class="button-title">Remove<br/>Page</span>
                <span class="button-help">This button will remove the selected page from your document.</span>
                <img class="ribbon-icon ribbon-normal"
                     src="{{ url_for('static', filename='ribbon/icons/normal/delete-page.png') }}"/>
                <img class="ribbon-icon ribbon-hot"
                     src="{{ url_for('static', filename='ribbon/icons/hot/delete-page.png') }}"/>
                <img class="ribbon-icon ribbon-disabled"
                     src="{{ url_for('static', filename='ribbon/icons/disabled/delete-page.png') }}"/>
            </div>
        </div>

        <div class="ribbon-section">
            <span class="section-title">Grid Controls</span>
            <div class="ribbon-button ribbon-button-large" id="grid-controls">
                <label>Grid Size:
                    <input type="number" id="grid-size-input" min="5" max="100" value="25">
                    <button id="resize-grid-btn" class="btn">Resize</button>
                </label>
                <button id="clear-grid" class="btn" onclick="clearGrid();">🗑 Clear Grid</button>
                <button id="clear-palette" class="btn danger">🧹 Clear Palette</button>
            </div>
        </div>

        <div id="tool-selector" class="ribbon-section tool-toggle">
            <span class="section-title">Select Size</span>
            <label class="tool-option ribbon-button ribbon-button-large">
                <input type="radio" name="tool" value="single" checked>
                <span class="ribbon-icon ribbon-normal">🟪</span>
                <span class="button-help">Select a single square.</span>
            </label>
            <label class="tool-option ribbon-button ribbon-button-large">
                <input type="radio" name="tool" value="quad">
                <span class="ribbon-icon ribbon-normal">🟪🟪 <br>🟪🟪</span>
                <span class="button-help">Select a 2 x 2 area</span>
            </label>
            <label class="tool-option ribbon-button ribbon-button-large">
                <input type="radio" name="tool" value="mega">
                <span class="ribbon-icon ribbon-normal">🟪🟪🟪<br>🟪🟪🟪<br>🟪🟪🟪</span>
                <span class="button-help">Select a 5 x 5 area</span>
            </label>
        </div>

        <div class="ribbon-section">
            <div class="ribbon-button ribbon-button-small" id="run-btn">
                <span class="button-title">Run</span>
                <img class="ribbon-icon ribbon-normal"
                     src="{{ url_for('static', filename='ribbon/icons/normal/run.png') }}"/>
                <img class="ribbon-icon ribbon-hot" src="{{ url_for('static', filename='ribbon/icons/hot/run.png') }}"/>
                <img class="ribbon-icon ribbon-disabled"
                     src="{{ url_for('static', filename='ribbon/icons/disabled/run.png') }}"/>
            </div>
            <div class="ribbon-button ribbon-button-small" id="repeat-btn">
                <span class="button-title">Repeat</span>
                <span class="button-help">This button will repeat something.</span>
                <img class="ribbon-icon ribbon-normal"
                     src="{{ url_for('static', filename='ribbon/icons/normal/repeat.png') }}"/>
                <img class="ribbon-icon ribbon-hot"
                     src="{{ url_for('static', filename='ribbon/icons/hot/repeat.png') }}"/>
                <img class="ribbon-icon ribbon-disabled"
                     src="{{ url_for('static', filename='ribbon/icons/disabled/repeat.png') }}"/>
            </div>
            <div class="ribbon-button ribbon-button-small disabled" id="save-btn">
                <span class="button-title">Save</span>
                <span class="button-help">This button will save your document.</span>
                <img class="ribbon-icon ribbon-normal"
                     src="{{ url_for('static', filename='ribbon/icons/normal/save.png') }}"/>
            </div>
            <span class="section-title">Actions</span>
        </div>

    </div>

    <div class="ribbon-tab" id="next-tab">
        <span class="ribbon-title">Colors</span>
        <div class="ribbon-section">
            <!--<span class="section-title">Choose Symbol</span>-->
             <div class="ribbon-button ribbon-button-large">
                <span class="button-title" id="open-palette">Choose Colors</span>
                <span class="button-help">This button will save your document.</span>
                <img class="ribbon-icon ribbon-normal ribbon-icon-custom32"
                     src="{{ url_for('static', filename='ribbon/icons/custom/color-palette.png') }}"/>
            </div>
            <div class="ribbon-element ribbon-element-large active-symbol-box palette-tool">
                <span class="button-help">This is your currently selected symbol</span>
                <span class="active-symbol-title">Active</span>
                <span id="active-symbol-display" class="selected-symbol ribbon-icon ribbon-normal"><strong>∅</strong></span>

            </div>
            <div id="palette-dropdown" class="ribbon-element ribbon-element-large palette-tool">
<!--
                    <button id="close-palette-dropdown" class="close-dropdown-btn">✖</button>
-->
                    <div id="active-palette" class="ribbon-palette-grid"></div>
            </div>
        </div>
        <div class="ribbon-section">
            <span class="section-title">Symbols/Color</span>
            <div class="ribbon-element ribbon-button-large toggle-wrapper">
                <label class="toggle-switch" for="toggle-view-mode" style="cursor: pointer;">
                    <input type="checkbox" id="toggle-view-mode"/>
                    <div class="switch-body">
                            <span class="icon sun">📜</span>
                            <span class="icon moon">🎨</span>
                        </div>
                </label>
            </div>
        </div>
    </div>
</div>

<div class="page">
    <section class="main-grid">
        <div id="grid-container">
            <!-- Grid renders here -->
        </div>
    </section>
</div>

<main class="app-layout">
    <span class="button-title">🎨 Palette</span>
    <span class="button-help">Currently selected color symbol</span>

    <div class="toggle-wrapper">
                    <label class="toggle-switch">
                        <input type="checkbox" id="iconToggle">
                        <div class="switch-body">
                            <span class="icon sun">🌞</span>
                            <span class="icon moon">🌙</span>
                        </div>
                    </label>
                </div>
    <!--
            <div id="active-palette" class="palette-grid"></div>
    -->

</main>

<div id="palette-modal" class="modal hidden">
    <div id="dmc-selector-panel">
        <h2>Select DMC Colors</h2>
        <input type="text" id="color-search" placeholder="Search DMC code, name, or hex..."/>
        <div id="color-list"></div>
        <h3>Preview Palette</h3>
        <div id="selected-palette"></div>
        <button id="confirm-palette" class="btn">➕ Add to Active Palette</button>
        <button id="close-palette" class="btn">❌ Close</button>
    </div>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="{{ url_for('static', filename='js/app.js') }}"></script>
<script src="{{ url_for('static', filename='js/colors.js') }}"></script>
<script src="{{ url_for('static', filename='js/tb.js') }}"></script>
<script src="{{ url_for('static', filename='ribbon/ribbon.js') }}"></script>
<script src="{{ url_for('static', filename='ribbon/jquery.tooltip.min.js') }}"></script>

<script type="text/javascript">
$(document).ready(function () {
    $('#ribbon').ribbon();

    // Enable/disable buttons
    $('#enable-btn').click(function () {
        $('#del-table-btn, #del-page-btn, #save-btn, #other-btn-2').enable();
        $('#enable-btn').hide();
        $('#disable-btn').show();
    });

    $('#disable-btn').click(function () {
        $('#del-table-btn, #del-page-btn, #save-btn, #other-btn-2').disable();
        $('#disable-btn').hide();
        $('#enable-btn').show();
    });

    // 🎨 Open palette dropdown on button click (no toggle)
    $('#palette-dropdown-btn').click(function (e) {
        e.stopPropagation();
        $('#palette-dropdown').addClass('show').removeClass('hidden');
    });

    // ✖ Close dropdown manually
    $('#close-palette-dropdown').click(function (e) {
        e.stopPropagation();
        $('#palette-dropdown').removeClass('show').addClass('hidden');
    });

    // Swatch click to select
    $('#active-palette').delegate('.color-swatch', 'click', function () {
    $('.color-swatch').removeClass('selected');
    $(this).addClass('selected');
    var color = $(this).css('background-color');
});
});


</script>

</body>
</html>